# vim: filetype=neomuttrc
set use_threads=reverse sort=last-date sort_aux=date-sent
set uncollapse_new = yes # open threads when new mail
set uncollapse_jump = yes # jump to unread message when uncollapse
set collapse_unread = no # don't collapse threads with unread mails
folder-hook . push '<collapse-all>'

macro index,pager gd "<change-folder>=[Gmail]/Drafts<enter>" "go to drafts"
macro index,pager Md ";<save-message>=[Gmail]/Drafts<enter>" "move mail to drafts"
macro index,pager Cd ";<copy-message>=[Gmail]/Drafts<enter>" "copy mail to drafts"
macro index,pager gj "<change-folder>=[Gmail]/Spam<enter>" "go to junk"
macro index,pager Mj ";<save-message>=[Gmail]/Spam<enter>" "move mail to junk"
macro index,pager Cj ";<copy-message>=[Gmail]/Spam<enter>" "copy mail to junk"
macro index,pager gt "<change-folder>=[Gmail]/Trash<enter>" "go to trash"
macro index,pager Mt ";<save-message>=[Gmail]/Trash<enter>" "move mail to trash"
macro index,pager Ct ";<copy-message>=[Gmail]/Trash<enter>" "copy mail to trash"
macro index,pager gs "<change-folder>=[Gmail]/Sent Mail<enter>" "go to sent"
macro index,pager Ms ";<save-message>=[Gmail]/Sent Mail<enter>" "move mail to sent"
macro index,pager Cs ";<copy-message>=[Gmail]/Sent Mail<enter>" "copy mail to sent"

# labels as read for Gmail
#macro index l "<modify-labels>-unread<enter><display-message>" "display message"

#unbind \Cn
#macro index \Cn "<mark-as-new><modify-labels>+unread<enter><sync-mailbox>" "mark as new and unread"

set mark_old=no

set sidebar_folder_indent
set sidebar_indent_string="  "

set attach_save_dir="~/Downloads/"

######################
#    GPG Encyption   #
######################
set crypt_use_gpgme=yes
set crypt_opportunistic_encrypt = no

######################
#  Compose settings  #
######################
macro compose m "<first-entry>\
<pipe-entry>convert-multipart<enter>\
<enter-command>source /tmp/neomutt-commands<enter>

set indent_string="> " 
set date_format="%b %d, %Y at %H:%M"

set query_command="/opt/homebrew/bin/lbdbq '%s'"
bind editor <Tab> complete-query

# How we reply and quote emails.
set send_charset = "utf-8:iso-8859-1:us-ascii" # send in utf-8

# Set time-zone in emails to UTC
set local_date_header=no

set forward_format = "Fwd: %s"       # format of subject when forwarding
set forward_decode                   # decode when forwarding
set forward_quote                    # include message in forwards
set mime_forward                     # forward attachments as part of body
set attribution = "On %d, %n wrote:" # format of quoting header
set reply_to                         # reply to Reply to: field
set reverse_name                     # reply as whomever it was to
set include                          # include message in replies
set text_flowed=yes                  # correct indentation for plain text
unset sig_dashes                     # no dashes before sig
unset markers

source ~/.config/mutt/colors-gruvbox.muttrc
source ~/.config/mutt/powerline.muttrc
