# vim: filetype=neomuttrc
set use_threads=reverse sort=last-date sort_aux=date-sent
set uncollapse_new = yes # open threads when new mail
set uncollapse_jump = yes # jump to unread message when uncollapse
set collapse_unread = no # don't collapse threads with unread mails
folder-hook . push '<collapse-all>'

macro index O "<shell-escape>mailsync<enter>" "run mailsync to sync all mail"

set mark_old=no

set sidebar_folder_indent
set sidebar_indent_string="  "
set sidebar_width = 27

set attach_save_dir="~/Downloads/"

######################
#    GPG Encyption   #
######################
set crypt_use_gpgme = yes
set crypt_opportunistic_encrypt = no

######################
#  Compose settings  #
######################
set edit_headers = yes # Edit headers in nvim
set auto_edit = yes # Go directly to nvim
macro compose m "<first-entry>\
<pipe-entry>convert-multipart<enter>\
<enter-command>source /tmp/neomutt-commands<enter>

set date_format="%b %d, %Y at %H:%M"

# set query_command="/opt/homebrew/bin/lbdbq '%s'"
set query_command = "echo '' && notmuch address from:/%s/"
set query_format="%4c %t %-70.70a %-70.70n %?e?(%e)?"
bind editor <Tab> complete-query

# How we reply and quote emails.
set send_charset = "utf-8:iso-8859-1:us-ascii" # send in utf-8

unset local_date_header              # Set time-zone in emails to UTC
set forward_format = "Fwd: %s"       # format of subject when forwarding
set forward_decode                   # decode when forwarding
set forward_quote                    # include message in forwards
unset mime_forward                   # mail body is forwarded as text
set forward_attachments              # attachments are forwarded with mail
set attribution = "On %d, %n wrote:" # format of quoting header
set reply_to                         # reply to Reply to: field
set reverse_name                     # reply as whomever it was to
set include                          # include message in replies
set text_flowed                      # correct indentation for plain text
set reflow_text
unset sig_on_top
set sig_dashes                     # no dashes before sig
unset markers

source ~/.config/mutt/colors-gruvbox.muttrc
source ~/.config/mutt/powerline.muttrc
